<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <title>Валентинка для Медины 💖</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@500;600;700&family=Manrope:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="animated-background"></div>
    <div class="stars-background"></div>

    <div class="container">
        <div class="score-board">
            <span class="score-label">Баллы:</span>
            <span class="score-value" id="score">0</span>
        </div>

        <div class="content-wrapper" id="mainContent">
            <h1 class="title">Медина, это для тебя</h1>
            <p class="subtitle">10 мини игр,да может быть немного сложные но кто сказал что будет легко ? Собери достаточно баллов что бы открыть секретный подарок, удачи жаным</p>
            <button class="btn btn-primary" onclick="startGames()" id="startBtn">Начать испытание</button>
            <div id="introResponse" class="response"></div>
        </div>

        <div class="game-container game-selector" id="gameSelector" style="display:none;">
            <h2 class="game-title">Выбери любую игру</h2>
            <p class="game-description">Игры проходятся в любом порядке. После победы ты вернешься сюда.</p>
            <div class="game-select-grid">
                <button class="game-select-btn" data-game-id="1" onclick="startSelectedGame(1)">1. Ливень сердец</button>
                <button class="game-select-btn" data-game-id="2" onclick="startSelectedGame(2)">2. Точный выбор</button>
                <button class="game-select-btn" data-game-id="3" onclick="startSelectedGame(3)">3. Память цепочки</button>
                <button class="game-select-btn" data-game-id="4" onclick="startSelectedGame(4)">4. Печатай быстро</button>
                <button class="game-select-btn" data-game-id="5" onclick="startSelectedGame(5)">5. Ритм сердца</button>
                <button class="game-select-btn" data-game-id="6" onclick="startSelectedGame(6)">6. Маршрут памяти</button>
                <button class="game-select-btn" data-game-id="7" onclick="startSelectedGame(7)">7. Сложный квиз</button>
                <button class="game-select-btn" data-game-id="8" onclick="startSelectedGame(8)">8. Рывок на реакцию</button>
                <button class="game-select-btn" data-game-id="9" onclick="startSelectedGame(9)">9. Логика 5x5</button>
                <button class="game-select-btn" data-game-id="10" onclick="startSelectedGame(10)">10. Knife Hit</button>
            </div>
            <div class="game-select-actions">
                <button class="btn-next-market game-select-final-btn" id="openSecretBtn" onclick="openSecretGift()" disabled>Секретный подарок (10 игр осталось)</button>
            </div>
            <div id="gameSelectMessage" class="game-result game-select-message"></div>
        </div>

        <div class="game-container" id="game1" style="display:none;">
            <h2 class="game-title">Игра 1: Ливень сердец</h2>
            <p class="game-description">Поймай 32 сердца, избегай бомб, у тебя 3 жизни.</p>
            <div class="game-area" id="game1Area"></div>
            <div class="game-stats">
                <span>Время: <span id="game1Timer">25</span>s</span>
                <span>Поймано: <span id="game1Caught">0</span>/32</span>
                <span>Жизни: <span id="game1Lives">3</span></span>
            </div>
        </div>

        <div class="game-container" id="game2" style="display:none;">
            <h2 class="game-title">Игра 2: Точный выбор</h2>
            <p class="game-description">Жми только на золотые сердца. Ошибка отнимает 1 попадание.</p>
            <div class="game-stats">
                <span>Время: <span id="game2Timer">28</span>s</span>
                <span>Попаданий: <span id="game2Hits">0</span>/18</span>
            </div>
            <div class="target-board" id="game2Board"></div>
        </div>

        <div class="game-container" id="game3" style="display:none;">
            <h2 class="game-title">Игра 3: Память цепочки</h2>
            <p class="game-description">Запомни 10 уровней последовательности из 5 символов.</p>
            <div class="sequence-display" id="seqDisplay"></div>
            <div class="memory-buttons" id="seqButtons"></div>
            <div id="seqInfo" class="game-result"></div>
        </div>

        <div class="game-container" id="game4" style="display:none;">
            <h2 class="game-title">Игра 4: Печатай быстро</h2>
            <p class="game-description">Введи 3 фразы без ошибок до конца таймера.</p>
            <div class="quiz-question" id="typeTarget"></div>
            <input class="number-input" id="typeInput" placeholder="Введи фразу точно" autocomplete="off">
            <button class="btn btn-small" onclick="submitTypingRound()">Проверить</button>
            <div class="game-stats">
                <span>Время: <span id="typeTimer">60</span>s</span>
                <span>Прогресс: <span id="typeProgress">0</span>/4</span>
            </div>
            <div id="typeInfo" class="game-result"></div>
        </div>

        <div class="game-container" id="game5" style="display:none;">
            <h2 class="game-title">Игра 5: Ритм сердца</h2>
            <p class="game-description">Лови ритм: жми в момент, когда маркер в золотой зоне.</p>
            <div class="rhythm-panel">
                <div class="rhythm-track" id="rhythmTrack">
                    <div class="rhythm-zone" id="rhythmZone"></div>
                    <div class="rhythm-marker" id="rhythmMarker"></div>
                </div>
                <button class="btn btn-small" onclick="catchRhythmBeat()">Поймать ритм</button>
            </div>
            <div class="game-stats">
                <span>Время: <span id="rhythmTimer">45</span>s</span>
                <span>Попаданий: <span id="rhythmHits">0</span>/20</span>
                <span>Промахов: <span id="rhythmMisses">0</span>/5</span>
            </div>
            <div id="rhythmInfo" class="game-result"></div>
        </div>

        <div class="game-container" id="game6" style="display:none;">
            <h2 class="game-title">Игра 6: Маршрут памяти</h2>
            <p class="game-description">Запомни маршрут на сетке 4x4 и повтори его.</p>
            <div class="sequence-display" id="patternShow"></div>
            <div class="pattern-grid" id="patternGrid"></div>
            <button class="btn btn-small" onclick="replayGame6Route()">Показать маршрут снова</button>
            <div id="patternInfo" class="game-result"></div>
        </div>

        <div class="game-container" id="game7" style="display:none;">
            <h2 class="game-title">Игра 7: Сложный квиз</h2>
            <p class="game-description">Нужно минимум 4 правильных ответа из 6.</p>
            <div class="quiz-question" id="quizQuestion"></div>
            <div class="quiz-options" id="quizOptions"></div>
            <div id="quizProgress" class="game-result"></div>
        </div>

        <div class="game-container" id="game8" style="display:none;">
            <h2 class="game-title">Игра 8: Рывок на реакцию</h2>
            <p class="game-description">Поймай 50 мишеней за 20 секунд.</p>
            <div class="game-area" id="bossArea"></div>
            <div class="game-stats">
                <span>Время: <span id="bossTimer">20</span>s</span>
                <span>Попаданий: <span id="bossHits">0</span>/28</span>
            </div>
        </div>

        <div class="game-container" id="game9" style="display:none;">
            <h2 class="game-title">Игра 9: Логика 5x5</h2>
            <p class="game-description">Найди одинаковые карточки. 15 секунд на запоминание, 10 жизней, ошибка = -1 жизнь.</p>
            <div class="game-stats">
                <span>Запомнить: <span id="game9PreviewTimer">15</span>s</span>
                <span>Жизни: <span id="game9Lives">10</span></span>
                <span>Пары: <span id="game9Pairs">0</span>/12</span>
            </div>
            <div class="logic-grid" id="game9Grid"></div>
            <div id="game9Info" class="game-result"></div>
        </div>

        <div class="game-container" id="game10" style="display:none;">
            <h2 class="game-title">Игра 10: Knife Hit</h2>
            <p class="game-description">Бросай ножи в вращающееся колесо и не попадай в уже воткнутые ножи.</p>
            <div class="knife-board" id="knifeBoard">
                <div class="knife-wheel" id="knifeWheel">
                    <div class="knife-core"></div>
                    <div class="knife-sticks" id="knifeSticks"></div>
                </div>
            </div>
            <div class="game-stats">
                <span>Ножей осталось: <span id="game10KnivesLeft">12</span></span>
                <span>Жизни: <span id="game10Lives">3</span></span>
            </div>
            <div style="text-align:center; margin-top: 14px;">
                <button class="btn btn-small" onclick="throwKnifeGame10()">Бросить нож</button>
            </div>
            <div id="game10Info" class="game-result"></div>
        </div>

        <div class="market-container" id="marketContainer" style="display:none;">
            <h2 class="game-title">Пазл из фото</h2>
            <p class="game-description">Открывай ячейки сетки 4x2 за баллы. Когда откроешь все 8, появится целое фото.</p>

            <div class="puzzle-preview puzzle-preview-8" id="puzzlePreview"></div>
            <div id="puzzleProgress" class="game-result"></div>

            <div id="marketButtons" style="text-align: center; margin-top: 30px;">
                <button class="btn-next-market" onclick="proceedFromMarket()">Дальше</button>
                <button class="btn-next-market" id="playAgainMarket" style="display:none; background: linear-gradient(135deg, #FF9800, #F57C00); margin-left: 10px;" onclick="playAgain()">Переиграть</button>
            </div>
        </div>

        <div class="final-question final-redesign" id="finalQuestion" style="display:none;">
            <p class="final-kicker">Финальный вопрос</p>
            <h2 class="question">Медина, ты будешь моей валентинкой?</h2>
            <p class="final-note">Осталось нажать только одну кнопку</p>
            <div class="button-container final-actions">
                <button class="btn btn-yes final-btn final-btn-yes" onclick="handleYes()">Да, конечно</button>
                <button class="btn btn-no final-btn final-btn-no" id="noBtn">Нет...</button>
            </div>
            <div class="response final-response" aria-live="polite"></div>
        </div>
    </div>

    <div class="confetti-container" id="confetti"></div>
    <div class="particles" id="particles"></div>

    <script src="script.js"></script>
</body>
</html>
