<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <title>Валентинка для Медины 💖</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@500;600;700&family=Manrope:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="animated-background"></div>
    <div class="stars-background"></div>

    <div class="container">
        <div class="score-board">
            <span class="score-label">Баллы:</span>
            <span class="score-value" id="score">0</span>
        </div>

        <div class="content-wrapper" id="mainContent">
            <h1 class="title">Медина, это для тебя</h1>
            <p class="subtitle">8 сложных игр. Собери достаточно баллов и открой чудо только для тебя, Медина.</p>
            <button class="btn btn-primary" onclick="startGames()" id="startBtn">Начать испытание</button>
            <div id="introResponse" class="response"></div>
        </div>

        <div class="game-container" id="game1" style="display:none;">
            <h2 class="game-title">Игра 1: Ливень сердец</h2>
            <p class="game-description">Поймай 32 сердца, избегай бомб, у тебя 3 жизни.</p>
            <div class="game-area" id="game1Area"></div>
            <div class="game-stats">
                <span>Время: <span id="game1Timer">25</span>s</span>
                <span>Поймано: <span id="game1Caught">0</span>/32</span>
                <span>Жизни: <span id="game1Lives">3</span></span>
            </div>
        </div>

        <div class="game-container" id="game2" style="display:none;">
            <h2 class="game-title">Игра 2: Точный выбор</h2>
            <p class="game-description">Жми только на золотые сердца. Ошибки режут счет.</p>
            <div class="game-stats">
                <span>Время: <span id="game2Timer">22</span>s</span>
                <span>Попаданий: <span id="game2Hits">0</span>/24</span>
            </div>
            <div class="target-board" id="game2Board"></div>
        </div>

        <div class="game-container" id="game3" style="display:none;">
            <h2 class="game-title">Игра 3: Память цепочки</h2>
            <p class="game-description">Запомни последовательность до 7 символов.</p>
            <div class="sequence-display" id="seqDisplay"></div>
            <div class="memory-buttons" id="seqButtons"></div>
            <div id="seqInfo" class="game-result"></div>
        </div>

        <div class="game-container" id="game4" style="display:none;">
            <h2 class="game-title">Игра 4: Печатай быстро</h2>
            <p class="game-description">Введи 3 фразы без ошибок до конца таймера.</p>
            <div class="quiz-question" id="typeTarget"></div>
            <input class="number-input" id="typeInput" placeholder="Введи фразу точно" autocomplete="off">
            <button class="btn btn-small" onclick="submitTypingRound()">Проверить</button>
            <div class="game-stats">
                <span>Время: <span id="typeTimer">60</span>s</span>
                <span>Прогресс: <span id="typeProgress">0</span>/4</span>
            </div>
            <div id="typeInfo" class="game-result"></div>
        </div>

        <div class="game-container" id="game5" style="display:none;">
            <h2 class="game-title">Игра 5: Математический спринт</h2>
            <p class="game-description">Реши 10 примеров. Нужна скорость и точность.</p>
            <div class="quiz-question" id="mathQuestion"></div>
            <input class="number-input" id="mathAnswer" type="number" placeholder="Ответ" autocomplete="off">
            <button class="btn btn-small" onclick="submitMathAnswer()">Ответить</button>
            <div class="game-stats">
                <span>Время: <span id="mathTimer">90</span>s</span>
                <span>Решено: <span id="mathProgress">0</span>/10</span>
            </div>
            <div id="mathInfo" class="game-result"></div>
        </div>

        <div class="game-container" id="game6" style="display:none;">
            <h2 class="game-title">Игра 6: Маршрут памяти</h2>
            <p class="game-description">Запомни маршрут на сетке 4x4 и повтори его.</p>
            <div class="sequence-display" id="patternShow"></div>
            <div class="pattern-grid" id="patternGrid"></div>
            <button class="btn btn-small" onclick="replayGame6Route()">Показать маршрут снова</button>
            <div id="patternInfo" class="game-result"></div>
        </div>

        <div class="game-container" id="game7" style="display:none;">
            <h2 class="game-title">Игра 7: Сложный квиз</h2>
            <p class="game-description">Нужно минимум 4 правильных ответа из 6.</p>
            <div class="quiz-question" id="quizQuestion"></div>
            <div class="quiz-options" id="quizOptions"></div>
            <div id="quizProgress" class="game-result"></div>
        </div>

        <div class="game-container" id="game8" style="display:none;">
            <h2 class="game-title">Игра 8: Финальный рывок</h2>
            <p class="game-description">Поймай 50 мишеней за 20 секунд.</p>
            <div class="game-area" id="bossArea"></div>
            <div class="game-stats">
                <span>Время: <span id="bossTimer">20</span>s</span>
                <span>Попаданий: <span id="bossHits">0</span>/28</span>
            </div>
        </div>

        <div class="market-container" id="marketContainer" style="display:none;">
            <h2 class="game-title">Пазл из фото</h2>
            <p class="game-description">Открывай ячейки сетки 4x2 за баллы. Когда откроешь все 8, появится целое фото.</p>

            <div class="puzzle-preview puzzle-preview-8" id="puzzlePreview"></div>
            <div id="puzzleProgress" class="game-result"></div>

            <div id="marketButtons" style="text-align: center; margin-top: 30px;">
                <button class="btn-next-market" onclick="proceedFromMarket()">Дальше</button>
                <button class="btn-next-market" id="playAgainMarket" style="display:none; background: linear-gradient(135deg, #FF9800, #F57C00); margin-left: 10px;" onclick="playAgain()">Переиграть</button>
            </div>
        </div>

        <div class="final-question final-redesign" id="finalQuestion" style="display:none;">
            <p class="final-kicker">Финальный вопрос</p>
            <h2 class="question">Медина, ты будешь моей валентинкой?</h2>
            <p class="final-note">Осталось нажать только одну кнопку</p>
            <div class="button-container final-actions">
                <button class="btn btn-yes final-btn final-btn-yes" onclick="handleYes()">Да, конечно</button>
                <button class="btn btn-no final-btn final-btn-no" id="noBtn">Нет...</button>
            </div>
            <div class="response final-response" aria-live="polite"></div>
        </div>
    </div>

    <div class="confetti-container" id="confetti"></div>
    <div class="particles" id="particles"></div>

    <script src="script.js"></script>
</body>
</html>
